[gd_scene load_steps=26 format=3 uid="uid://b4aj0ifktgyw0"]

[ext_resource type="Script" path="res://Scenes/JSON_level_reader.gd" id="1_lnp3r"]
[ext_resource type="PackedScene" uid="uid://bmsfvkhij0unq" path="res://PLAYER/player.tscn" id="1_lt0gv"]
[ext_resource type="Script" path="res://Scripts/Camera3Dtest.gd" id="2_g0x2s"]
[ext_resource type="Texture2D" uid="uid://bnmwpmwyc5olf" path="res://Textures/levels/level_1.png" id="3_48emk"]
[ext_resource type="AudioStream" uid="uid://b8e8bkn0s8pvd" path="res://Audio/Music/Test Music.mp3" id="6_lw71q"]
[ext_resource type="Texture2D" uid="uid://shndpb4etpl8" path="res://Textures/levels/floor.png" id="6_uqu0m"]
[ext_resource type="Texture2D" uid="uid://uhonpftc0lwb" path="res://Textures/levels/foundational_poles.png" id="7_fkumi"]
[ext_resource type="Script" path="res://Scripts/Timeline Contol.gd" id="7_j70x5"]
[ext_resource type="Texture2D" uid="uid://b3ic1ehvhekpn" path="res://Textures/levels/poles.png" id="8_261v4"]
[ext_resource type="AudioStream" uid="uid://boo2r8tx3v02h" path="res://Audio/Music/VEDH Percussion 026.wav" id="8_u2pvb"]
[ext_resource type="Script" path="res://Scripts/tick.gd" id="9_64v7c"]
[ext_resource type="Texture2D" uid="uid://b2njenlbxomwo" path="res://Textures/levels/poles small.png" id="9_bmqcn"]
[ext_resource type="Texture2D" uid="uid://7wc5veje6xnj" path="res://Textures/levels/balcony.png" id="10_bsun4"]
[ext_resource type="ArrayMesh" uid="uid://b5rrfql8e05u0" path="res://Textures/flooring.obj" id="11_nhmeg"]

[sub_resource type="CameraAttributesPractical" id="CameraAttributesPractical_ern0j"]
dof_blur_far_enabled = true
dof_blur_far_distance = 1784.71
dof_blur_far_transition = 7608.2
dof_blur_near_enabled = true
dof_blur_near_distance = 1.97
dof_blur_near_transition = 3.2

[sub_resource type="BoxMesh" id="BoxMesh_jlgbx"]
size = Vector3(9.035, 0.07, 0.64)

[sub_resource type="ConcavePolygonShape3D" id="ConcavePolygonShape3D_av4u5"]
data = PackedVector3Array(-4.5175, 0.035, 0.32, 4.5175, 0.035, 0.32, -4.5175, -0.035, 0.32, 4.5175, 0.035, 0.32, 4.5175, -0.035, 0.32, -4.5175, -0.035, 0.32, 4.5175, 0.035, -0.32, -4.5175, 0.035, -0.32, 4.5175, -0.035, -0.32, -4.5175, 0.035, -0.32, -4.5175, -0.035, -0.32, 4.5175, -0.035, -0.32, 4.5175, 0.035, 0.32, 4.5175, 0.035, -0.32, 4.5175, -0.035, 0.32, 4.5175, 0.035, -0.32, 4.5175, -0.035, -0.32, 4.5175, -0.035, 0.32, -4.5175, 0.035, -0.32, -4.5175, 0.035, 0.32, -4.5175, -0.035, -0.32, -4.5175, 0.035, 0.32, -4.5175, -0.035, 0.32, -4.5175, -0.035, -0.32, 4.5175, 0.035, 0.32, -4.5175, 0.035, 0.32, 4.5175, 0.035, -0.32, -4.5175, 0.035, 0.32, -4.5175, 0.035, -0.32, 4.5175, 0.035, -0.32, -4.5175, -0.035, 0.32, 4.5175, -0.035, 0.32, -4.5175, -0.035, -0.32, 4.5175, -0.035, 0.32, 4.5175, -0.035, -0.32, -4.5175, -0.035, -0.32)

[sub_resource type="BoxMesh" id="BoxMesh_hp5vt"]
size = Vector3(2.03, 0.07, 0.64)

[sub_resource type="ConcavePolygonShape3D" id="ConcavePolygonShape3D_jnp4c"]
data = PackedVector3Array(-1.015, 0.035, 0.32, 1.015, 0.035, 0.32, -1.015, -0.035, 0.32, 1.015, 0.035, 0.32, 1.015, -0.035, 0.32, -1.015, -0.035, 0.32, 1.015, 0.035, -0.32, -1.015, 0.035, -0.32, 1.015, -0.035, -0.32, -1.015, 0.035, -0.32, -1.015, -0.035, -0.32, 1.015, -0.035, -0.32, 1.015, 0.035, 0.32, 1.015, 0.035, -0.32, 1.015, -0.035, 0.32, 1.015, 0.035, -0.32, 1.015, -0.035, -0.32, 1.015, -0.035, 0.32, -1.015, 0.035, -0.32, -1.015, 0.035, 0.32, -1.015, -0.035, -0.32, -1.015, 0.035, 0.32, -1.015, -0.035, 0.32, -1.015, -0.035, -0.32, 1.015, 0.035, 0.32, -1.015, 0.035, 0.32, 1.015, 0.035, -0.32, -1.015, 0.035, 0.32, -1.015, 0.035, -0.32, 1.015, 0.035, -0.32, -1.015, -0.035, 0.32, 1.015, -0.035, 0.32, -1.015, -0.035, -0.32, 1.015, -0.035, 0.32, 1.015, -0.035, -0.32, -1.015, -0.035, -0.32)

[sub_resource type="BoxMesh" id="BoxMesh_5njs4"]
size = Vector3(0.235, 0.07, 0.64)

[sub_resource type="ConcavePolygonShape3D" id="ConcavePolygonShape3D_nm75b"]
data = PackedVector3Array(-0.1175, 0.035, 0.32, 0.1175, 0.035, 0.32, -0.1175, -0.035, 0.32, 0.1175, 0.035, 0.32, 0.1175, -0.035, 0.32, -0.1175, -0.035, 0.32, 0.1175, 0.035, -0.32, -0.1175, 0.035, -0.32, 0.1175, -0.035, -0.32, -0.1175, 0.035, -0.32, -0.1175, -0.035, -0.32, 0.1175, -0.035, -0.32, 0.1175, 0.035, 0.32, 0.1175, 0.035, -0.32, 0.1175, -0.035, 0.32, 0.1175, 0.035, -0.32, 0.1175, -0.035, -0.32, 0.1175, -0.035, 0.32, -0.1175, 0.035, -0.32, -0.1175, 0.035, 0.32, -0.1175, -0.035, -0.32, -0.1175, 0.035, 0.32, -0.1175, -0.035, 0.32, -0.1175, -0.035, -0.32, 0.1175, 0.035, 0.32, -0.1175, 0.035, 0.32, 0.1175, 0.035, -0.32, -0.1175, 0.035, 0.32, -0.1175, 0.035, -0.32, 0.1175, 0.035, -0.32, -0.1175, -0.035, 0.32, 0.1175, -0.035, 0.32, -0.1175, -0.035, -0.32, 0.1175, -0.035, 0.32, 0.1175, -0.035, -0.32, -0.1175, -0.035, -0.32)

[sub_resource type="BoxMesh" id="BoxMesh_c66t6"]
size = Vector3(3.29, 0.07, 0.64)

[sub_resource type="BoxMesh" id="BoxMesh_8xmgj"]
size = Vector3(7.675, 0.11, 1.16)

[sub_resource type="BoxMesh" id="BoxMesh_0yqgt"]
size = Vector3(0.14, 2.015, 0.23)

[sub_resource type="Environment" id="Environment_ru4r5"]
reflected_light_source = 2
tonemap_mode = 1
ssr_enabled = true
ssr_fade_in = 0.579561
ssr_depth_tolerance = 0.01
ssao_enabled = true
ssao_radius = 8.45
ssao_intensity = 3.38
ssao_power = 1.26134
ssao_detail = 3.55
ssil_radius = 2.7
ssil_intensity = 3.33
ssil_sharpness = 0.0
sdfgi_enabled = true
sdfgi_use_occlusion = true
sdfgi_bounce_feedback = 0.0
sdfgi_min_cell_size = 2.35
glow_enabled = true
glow_intensity = 4.53
glow_bloom = 0.69
fog_enabled = true
fog_light_color = Color(0, 0, 0, 1)
fog_light_energy = 11.5
fog_density = 0.047
volumetric_fog_enabled = true
volumetric_fog_density = 0.2727
volumetric_fog_albedo = Color(0, 0, 0, 1)
volumetric_fog_emission_energy = 35.7
volumetric_fog_gi_inject = 4.0

[node name="Level 1" type="Node3D"]
script = ExtResource("1_lnp3r")
json_file_path = "res://Levels/test_level.json"

[node name="PLAYER" parent="." instance=ExtResource("1_lt0gv")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.0455051, 0)

[node name="Camera3D2" type="Camera3D" parent="PLAYER"]
transform = Transform3D(1, 0, 0, 0, 0.976473, -0.215639, 0, 0.215639, 0.976473, 0, 0.124988, 1.92195)
attributes = SubResource("CameraAttributesPractical_ern0j")
fov = 46.9
size = 0.1
near = 0.121
script = ExtResource("2_g0x2s")
yPosition = -0.185
yRotation = 1.325
height = -2.795
distanceFromPlayer = -1.535

[node name="ENEMIES" type="Node3D" parent="."]

[node name="ENVIRONMENT" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -0.130429)

[node name="Layout" type="Node3D" parent="ENVIRONMENT"]

[node name="MeshInstance3D" type="MeshInstance3D" parent="ENVIRONMENT/Layout"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.148915, -0.00464088, 0.0391814)
mesh = SubResource("BoxMesh_jlgbx")

[node name="StaticBody3D" type="StaticBody3D" parent="ENVIRONMENT/Layout/MeshInstance3D"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="ENVIRONMENT/Layout/MeshInstance3D/StaticBody3D"]
shape = SubResource("ConcavePolygonShape3D_av4u5")

[node name="MeshInstance3D2" type="MeshInstance3D" parent="ENVIRONMENT/Layout"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3.50083, 0.830357, 0.0690753)
mesh = SubResource("BoxMesh_hp5vt")
skeleton = NodePath("../MeshInstance3D")

[node name="StaticBody3D2" type="StaticBody3D" parent="ENVIRONMENT/Layout/MeshInstance3D2"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="ENVIRONMENT/Layout/MeshInstance3D2/StaticBody3D2"]
shape = SubResource("ConcavePolygonShape3D_jnp4c")

[node name="MeshInstance3D3" type="MeshInstance3D" parent="ENVIRONMENT/Layout"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.94555, 0.830357, 0.0690753)
mesh = SubResource("BoxMesh_5njs4")
skeleton = NodePath("../MeshInstance3D")

[node name="StaticBody3D" type="StaticBody3D" parent="ENVIRONMENT/Layout/MeshInstance3D3"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="ENVIRONMENT/Layout/MeshInstance3D3/StaticBody3D"]
shape = SubResource("ConcavePolygonShape3D_nm75b")

[node name="MeshInstance3D4" type="MeshInstance3D" parent="ENVIRONMENT/Layout"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.452824, 1.6087, 0.138151)
mesh = SubResource("BoxMesh_c66t6")
skeleton = NodePath("../MeshInstance3D")

[node name="StaticBody3D2" type="StaticBody3D" parent="ENVIRONMENT/Layout/MeshInstance3D4"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="ENVIRONMENT/Layout/MeshInstance3D4/StaticBody3D2"]
shape = SubResource("ConcavePolygonShape3D_jnp4c")

[node name="MeshInstance3D5" type="MeshInstance3D" parent="ENVIRONMENT/Layout"]
transform = Transform3D(-4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, 3.00469, 0.796219, 0.0690753)
mesh = SubResource("BoxMesh_8xmgj")
skeleton = NodePath("../MeshInstance3D")

[node name="StaticBody3D2" type="StaticBody3D" parent="ENVIRONMENT/Layout/MeshInstance3D5"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="ENVIRONMENT/Layout/MeshInstance3D5/StaticBody3D2"]
shape = SubResource("ConcavePolygonShape3D_jnp4c")

[node name="MeshInstance3D6" type="MeshInstance3D" parent="ENVIRONMENT/Layout"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3.19307, 1.24763, 0.0690753)
mesh = SubResource("BoxMesh_5njs4")
skeleton = NodePath("../MeshInstance3D")

[node name="StaticBody3D" type="StaticBody3D" parent="ENVIRONMENT/Layout/MeshInstance3D6"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="ENVIRONMENT/Layout/MeshInstance3D6/StaticBody3D"]
shape = SubResource("ConcavePolygonShape3D_nm75b")

[node name="MeshInstance3D7" type="MeshInstance3D" parent="ENVIRONMENT/Layout"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.65723, 0.309831, 0.0690753)
mesh = SubResource("BoxMesh_5njs4")
skeleton = NodePath("../MeshInstance3D")

[node name="StaticBody3D" type="StaticBody3D" parent="ENVIRONMENT/Layout/MeshInstance3D7"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="ENVIRONMENT/Layout/MeshInstance3D7/StaticBody3D"]
shape = SubResource("ConcavePolygonShape3D_nm75b")

[node name="Foreground" type="Node3D" parent="ENVIRONMENT"]

[node name="Sprite3D" type="Sprite3D" parent="ENVIRONMENT/Foreground"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.45622, 0.380582)
visible = false
texture_filter = 0
texture = ExtResource("3_48emk")

[node name="roads" type="Sprite3D" parent="ENVIRONMENT/Foreground"]
transform = Transform3D(1, 0, 0, 0, 0.999096, 0.0425209, 0, -0.0425209, 0.999096, 0, 1.45622, 0.380582)
alpha_cut = 2
texture_filter = 0
texture = ExtResource("6_uqu0m")

[node name="foundation poles" type="Sprite3D" parent="ENVIRONMENT/Foreground"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.45622, -0.171389)
alpha_cut = 2
texture_filter = 0
texture = ExtResource("7_fkumi")

[node name="poles" type="Sprite3D" parent="ENVIRONMENT/Foreground"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.45622, -0.0658273)
alpha_cut = 2
texture_filter = 0
texture = ExtResource("8_261v4")

[node name="poles small" type="Sprite3D" parent="ENVIRONMENT/Foreground"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.45622, 0.247404)
alpha_cut = 2
texture_filter = 0
texture = ExtResource("9_bmqcn")

[node name="balcony" type="Sprite3D" parent="ENVIRONMENT/Foreground"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.45622, 0.281475)
alpha_cut = 2
texture_filter = 0
texture = ExtResource("10_bsun4")

[node name="Background" type="Node3D" parent="ENVIRONMENT"]

[node name="Flooring" type="MeshInstance3D" parent="ENVIRONMENT/Background"]
transform = Transform3D(0.0930522, 0, 0, 0, -4.06744e-09, -0.0930522, 0, 0.0930522, -4.06744e-09, 0.897231, 0.568682, 0.131527)
mesh = ExtResource("11_nhmeg")
skeleton = NodePath("../../..")

[node name="MeshInstance3D3" type="MeshInstance3D" parent="ENVIRONMENT/Background"]
transform = Transform3D(1, 0.000151496, -8.94911e-05, -0.000151496, 1, -0.000113602, 8.94911e-05, 0.000113602, 1, -1.5962, 0.564332, -0.291168)
mesh = SubResource("BoxMesh_0yqgt")
skeleton = NodePath("../MeshInstance3D")

[node name="MeshInstance3D4" type="MeshInstance3D" parent="ENVIRONMENT/Background"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.448325, 0.564332, -0.291168)
mesh = SubResource("BoxMesh_0yqgt")
skeleton = NodePath("../MeshInstance3D")

[node name="MeshInstance3D5" type="MeshInstance3D" parent="ENVIRONMENT/Background"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.704142, 0.564332, -0.291168)
mesh = SubResource("BoxMesh_0yqgt")
skeleton = NodePath("../MeshInstance3D")

[node name="Flooring2" type="MeshInstance3D" parent="ENVIRONMENT/Background"]
transform = Transform3D(0.0930522, 0, 0, 0, -4.06744e-09, -0.0930522, 0, 0.0930522, -4.06744e-09, -0.614518, 0.568682, 0.131527)
mesh = ExtResource("11_nhmeg")
skeleton = NodePath("../../..")

[node name="Flooring3" type="MeshInstance3D" parent="ENVIRONMENT/Background"]
transform = Transform3D(0.0930522, 0, 0, 0, -4.06744e-09, -0.0930522, 0, 0.0930522, -4.06744e-09, 0.208544, 0.568682, 0.131527)
mesh = ExtResource("11_nhmeg")
skeleton = NodePath("../../..")

[node name="Lighting" type="Node3D" parent="ENVIRONMENT"]

[node name="OmniLight3D" type="OmniLight3D" parent="ENVIRONMENT/Lighting"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.2577, 0.376607, -1.34371)
light_color = Color(0.992157, 0.631373, 0.207843, 1)
light_energy = 1.6
light_volumetric_fog_energy = 8.111
shadow_enabled = true
omni_range = 5.412
omni_attenuation = 1.1487

[node name="MusicControl" type="AudioStreamPlayer" parent="."]
stream = ExtResource("6_lw71q")
volume_db = -80.0
script = ExtResource("7_j70x5")

[node name="StartTimer" type="Timer" parent="MusicControl"]

[node name="Test sound" type="AudioStreamPlayer" parent="."]
stream = ExtResource("8_u2pvb")
volume_db = -26.237
script = ExtResource("9_64v7c")

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_ru4r5")

[connection signal="timeout" from="MusicControl/StartTimer" to="MusicControl" method="_on_start_timer_timeout"]
